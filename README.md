Mock tool
==================

モックアップの作成ツールです。

ディレクトリ構造
-----------------

```
{mook_tool_root}/
├ LICENSE
├ README.md
├ src/ => モックアップのもととなるテンプレートを配置するディレクトリです。
├ dist/ => 生成されたモックアップがこのディレクトリに出力されます。
├ docs/ => ドキュメント用ディレクトリです。
├ bin/ => 各種スクリプト格納ディレクトリです。
├ package.json
├ tsconfig.json
└ [vars.yml] => テンプレートの変数定義ファイルです。(必要に応じて作成してください)
```

セットアップ方法
-----------------

### 依存パッケージをインストールします

以下のいずれかのコマンドを実行し、依存パッケージをインストールします。

```
npm install 
```

または

```
yarn install
```

使い方
-----------------

VSCodeを起動後、画面左下の`NPMスクリプト`より  
`server`の`▷`マークをクリックして、簡易Webサーバーを起動します。

![スナップショット](./docs/images/vscode_snapshot.png)

`src`ディレクトリにモックアップのテンプレートを作成していきます。

テンプレートファイルの変更があった場合、ブラウザの自動リロードが行われ  
変更内容が画面に反映されます。

### 監視対象ファイルの拡張子

`src`ディレクトリ内の以下のファイルの更新を監視し、  
変更があった場合に自動的に再ビルドを行い、ブラウザをリロードます。

* `*.njk`
* `*.twig`
* `*.html`
* `vars.yml`
* `*.ts`
* `*.js`
* `*.scss`
* `*.sass`

HTMLの生成について
-----------------

テンプレートエンジンを利用することで、  
複数の画面で利用する共通のパーツを別ファイルとして切り出し、  
切り出したパーツファイルを呼び出すことで複数の画面で再利用できます。

モックアップのテンプレートエンジンに[Nunjucks][]を利用しています。

テンプレートの記法については、以下の公式サイトを参照してください。

[Nunjucks](https://mozilla.github.io/nunjucks/)

### パーツファイルについて

`_`で始まるファイル、または、ディレクトリ内のファイルはパーツとして扱われ、  
モックアップとしては生成されません。

#### ファイル名の例

パーツとして認識されるファイルの例は以下のとおりです。

* `_header.njk`
* `_menu.njk`
* `_footer.njk`
* `_partial/header.njk`
* `_partial/menu.njk`
* `_partial/footer.njk`
* `_layout/default.njk`

CSSの生成について
-----------------

* [Sass](https://www.npmjs.com/package/sass)を利用しています。

### 設定の初期値

* ソースディレクトリ：`scss`
* 出力先ディレクトリ：`css`
* 監視対象ファイルの拡張子：`scss`または`sass`
* パーシャルとして認識するファイルの接頭語：`_`
* パーシャルから除外するファイルの接尾語：`-bk`
* インデックスファイルのファイル名：`_index.scss`
    * 各ディレクトリ内のSassファイルをインポートするためのファイルです。
* マスターSassファイルのファイル名：`style.scss`
    * インデックスファイルをインポートするためのファイルです。
    * このファイルは対象ディレクトリ直下にのみ生成されます。

上記の各種設定は`.env`ファイルに記述することで変更可能です。

#### `.env`ファイルの設定例

```sh
## ソースディレクトリ
SOURCE_SCSS_DIR=src/scss
## 出力先ディレクトリ
OUTPUT_CSS_DIR=src/css
## 監視対象ファイルの拡張子
# SCSS_FILE_EXTENSIONS=scss,sass
## インデックスファイルのファイル名
# SCSS_INDEX_FILE_NAME=_index.scss
## パーシャルとして認識するファイルの接頭語
# SCSS_INCLUDE_FILE_PREFIX=_
## パーシャルから除外するファイルの接尾語
# SCSS_EXCLUDE_FILE_SUFFIX=-bk
## マスターSassファイルのファイル名
# SCSS_MAIN_FILE=style.scss
```

### 利用可能なコマンドライン引数

* `--watch` または `-w`：
    * ファイルの変更を監視し、変更があった場合に自動的に再ビルドします。
* `--production`：
    * このパラメーターがあるか否かCSSの出力形式の切り替えを行っています。
        * `--production`無し：`expanded`形式で出力します。
        * `--production`有り：`compressed`形式で出力します。
* `--debug`：
    * ファイルの監視状況をコンソールに出力します。
